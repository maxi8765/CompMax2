<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="ONx8UDKK1lVbgSfBQSmfZCeX2kjpHaBga7MAcc2ng6k" />
    <meta name="description" content="CompMax™ - Customize and optimize your job offer's salary and equity balance. A specialized tool for startups and tech companies to create flexible compensation packages.">
    <meta name="keywords" content="compensation calculator, salary negotiation, equity compensation, startup offer, job offer tool">
    <meta name="author" content="MXX1 Holdings Pty Ltd">
    <link rel="canonical" href="https://maxcomp.app/" />
    <title>CompMax™ - Salary & Equity Calculator</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://maxcomp.app/">
    <meta property="og:title" content="CompMax™ - Salary & Equity Calculator">
    <meta property="og:description" content="Customize job offers with flexible salary and equity components. Streamline compensation negotiations.">
    <meta property="og:image" content="https://maxcomp.app/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://maxcomp.app/">
    <meta property="twitter:title" content="CompMax™ - Salary & Equity Calculator">
    <meta property="twitter:description" content="Customize job offers with flexible salary and equity components. Streamline compensation negotiations.">
    <meta property="twitter:image" content="https://maxcomp.app/logo.png">

    <!-- Favicon -->
    <link rel="icon" href="favicon.png" type="image/png">

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "CompMax™ - Salary & Equity Calculator",
      "description": "A specialized compensation negotiation tool that enables employers to craft customizable job offers with flexible salary and equity components.",
      "applicationCategory": "BusinessApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "publisher": {
        "@type": "Organization",
        "name": "MXX1 Holdings Pty Ltd"
      }
    }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V3M451DF0Q"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-V3M451DF0Q');
    </script>

    <!-- Load EmailJS library -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <!-- Load app styles and script -->
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/config.js" defer></script>
    <script src="js/app.js" defer></script>
    <script src="js/format-salary.js"></script>
    <script src="js/date-fix.js"></script>
    
    <!-- Social sharing styles -->
    <style>
        .social-share-container {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--gray-100);
            border-radius: 8px;
            text-align: center;
        }
        .social-share-title {
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--gray-700);
        }
        .social-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            text-decoration: none;
        }
        .social-button:hover {
            transform: translateY(-3px);
        }
        .facebook {
            background-color: #1877f2;
        }
        .twitter {
            background-color: #000000;
            font-family: Arial, sans-serif;
            font-weight: bold;
        }
        .linkedin {
            background-color: #0077b5;
        }
        .email {
            background-color: #ff9800;
        }
        .feedback-container {
            margin-top: 20px;
            text-align: center;
        }
        .feedback-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        .feedback-button:hover {
            background-color: var(--primary-dark);
        }
        .feedback-form {
            display: none;
            margin-top: 15px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: left;
        }
        .feedback-form textarea {
            width: 100%;
            height: 100px;
            margin: 10px 0;
            padding: 8px;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
        }
        .feedback-form button {
            background-color: var(--success);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        .feedback-form button:hover {
            background-color: #2d9900;
        }
        .feedback-response {
            margin-top: 10px;
            padding: 8px;
            border-radius: 4px;
            display: none;
        }
        .feedback-success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        .feedback-error {
            background-color: #ffebee;
            color: #c62828;
        }
        /* Email options modal styles */
        #email-options-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .email-modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            width: 90%;
        }
        .email-option {
            display: block;
            text-decoration: none;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            text-align: center;
            color: white;
            font-weight: 500;
            transition: transform 0.2s;
        }
        .email-option:hover {
            transform: translateY(-2px);
        }
        .default-email {
            background-color: var(--primary);
        }
        .gmail-email {
            background-color: #DB4437;
        }
        .outlook-email {
            background-color: #0072C6;
        }
        .yahoo-email {
            background-color: #6001D2;
        }
        .cancel-email {
            background-color: var(--gray-300);
            color: var(--gray-700);
            border: none;
            cursor: pointer;
            width: 100%;
        }
    </style>
<!-- Force white background on all browsers, with slider fix -->
<meta name="theme-color" content="#ffffff">
<style>
  /* Force white background everywhere */
  html, body, * {
    background-color: #ffffff !important;
  }
  
  /* Fix for slider (range input) visibility */
  input[type="range"] {
    background-color: var(--gray-300) !important; /* Restore track color */
  }
  
  /* Fix slider thumb appearance across browsers */
  input[type="range"]::-webkit-slider-thumb {
    background-color: var(--primary) !important; /* Restore thumb color for WebKit */
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  input[type="range"]::-moz-range-thumb {
    background-color: var(--primary) !important; /* Restore thumb color for Firefox */
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  input[type="range"]::-ms-thumb {
    background-color: var(--primary) !important; /* Restore thumb color for IE/Edge */
    opacity: 1 !important;
    visibility: visible !important;
  }
  
  /* Only excluded elements should have their specified backgrounds */
  input:disabled, 
  .employee-mode-banner,
  .social-button,
  .feedback-button,
  .share-button,
  .accept-button,
  .copy-button,
  .email-option {
    background-color: var(--gray-200) !important;
  }
  
/* Restore specific button colors */
.share-button { background-color: var(--primary) !important; }
.accept-button { background-color: var(--success) !important; }
.success-button { background-color: var(--success) !important; }
.copy-button { background-color: var(--warning) !important; }
.feedback-button { background-color: var(--primary) !important; }
.employee-mode-banner { background-color: var(--warning) !important; }
.facebook { background-color: #1877f2 !important; }
.twitter { background-color: #000000 !important; }
.linkedin { background-color: #0077b5 !important; }
.email { background-color: #ff9800 !important; }

/* Email modal options */
.default-email { background-color: var(--primary) !important; }
.gmail-email { background-color: #DB4437 !important; }
.outlook-email { background-color: #0072C6 !important; }
.yahoo-email { background-color: #6001D2 !important; }
.cancel-email { background-color: var(--gray-300) !important; }

/* Feedback form elements */
#send-feedback, .feedback-form button { background-color: var(--success) !important; } 
.feedback-form { background-color: white !important; }
.feedback-success { background-color: #e8f5e9 !important; }
.feedback-error { background-color: #ffebee !important; }
.feedback-response { background-color: #f0f0f0 !important; }

/* Form input elements */
input:disabled { background-color: var(--gray-200) !important; }
textarea { background-color: white !important; }
.email-content { background-color: white !important; }
#feedback-email { background-color: white !important; }

/* Status messages and containers */
.status-message { background-color: var(--gray-100) !important; }
.share-link { background-color: var(--gray-100) !important; }
.social-share-container { background-color: var(--gray-100) !important; }
.privacy-statement { background-color: var(--gray-100) !important; }
.email-content-container { background-color: white !important; }

/* Modal elements */
.modal { background-color: rgba(0, 0, 0, 0.5) !important; }
.modal-content { background-color: white !important; }
.email-modal-content { background-color: white !important; }

/* Main content areas */
.calculator { background-color: white !important; }
#email-options-modal { background-color: rgba(0, 0, 0, 0.5) !important; }
  
  /* Apply at document root for extra force */
  :root {
    color-scheme: light only;
  }
</style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="logo.png" alt="CompMax Logo" class="logo">
            </div>
            <p class="subtitle">Salary & Equity Compensation Calculator</p>
            <div class="privacy-statement">
                <p>CompMax™ is a specialized compensation negotiation tool that enables employers (espeically startup employers) to craft customizable job offers with flexible salary and equity components. It allows hiring managers to set maximum compensation parameters, then share a secure link with candidates who can interactively adjust the salary-equity balance to suit their personal preferences. This streamlined approach eliminates back-and-forth negotiations, empowers candidates with personalized choice, and helps employers finalize compensation packages efficiently while respecting each candidate's unique financial priorities.<br><br> 
                <p>CompMax™ is a fully frontend-based tool. We do not collect, store, or transmit any user data to a backend server. All information entered into this site remains entirely on your device and is never shared with us or any third parties. We use no cookies, no analytics, and no tracking scripts. Your data stays yours — always.</p>            
            </div>
        </header>
        
        <main class="calculator" aria-label="Compensation Calculator">
            <div class="employee-mode-banner" id="employee-mode-banner" role="status">
                Offeree View Mode - Review your compensation offer below
            </div>
            
            <!-- Form -->
            <form id="compensation-form">
                <!-- Company Information -->
                <div class="input-group">
                    <label for="company-name">Company Name (making the offer)</label>
                    <input type="text" id="company-name" placeholder="Enter company name" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group" id="sender-name-group">
                    <label for="sender-name">Your Name (responsible person making the offer)</label>
                    <input type="text" id="sender-name" placeholder="Enter your name" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group" id="employer-email-group">
                    <label for="employer-email">Your Email (for notifications)</label>
                    <input type="email" id="employer-email" placeholder="Enter your email address" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group">
                    <label for="offer-date">Offer Date</label>
                    <input type="date" id="offer-date" class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group">
                    <label for="position-title">Position under Offer</label>
                    <input type="text" id="position-title" placeholder="Enter position title" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group">
                    <label for="employee-name">Offeree Name</label>
                    <input type="text" id="employee-name" placeholder="Enter offeree name" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group">
                    <label for="employee-email">Offeree Email</label>
                    <input type="email" id="employee-email" placeholder="Enter offeree email" 
                           class="standard-input" aria-required="true">
                </div>
                
                <div class="input-group">
                    <label for="max-salary">Max Salary ($) <a href="compensation-resources.html" target="_blank" class="resources-link" title="View compensation resources"><i class="resources-icon">📊</i></a></label>
                    <input type="text" id="max-salary" inputmode="numeric" pattern="[0-9,]*" value="150,000" 
                           aria-describedby="salary-desc">
                    <div id="salary-desc" class="sr-only">Maximum salary amount in dollars</div>
                </div>
                
                <!-- Equity Type Selection -->
                <div class="input-group" id="equity-type-selection">
                    <label>Equity Type</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="equity-type" id="equity-percentage" value="percentage" checked>
                            Percentage (%)
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="equity-type" id="equity-shares" value="shares">
                            Number of Shares/Options
                        </label>
                    </div>
                </div>
                
                <!-- Equity Inputs - only one shown at a time -->
                <div class="input-group" id="max-equity-group">
                    <label for="max-equity">Max Equity (%)</label>
                    <input type="number" id="max-equity" min="0" max="100" step="0.1" value="1.5" 
                           aria-describedby="equity-desc">
                    <div id="equity-desc" class="sr-only">Maximum equity percentage</div>
                </div>
                
                <div class="input-group" id="max-shares-group" style="display: none;">
                    <label for="max-shares">Max No. of Shares/Options</label>
                    <input type="text" id="max-shares" value="100,000" 
                           aria-describedby="shares-desc" inputmode="numeric" pattern="[0-9,]*">
                    <div id="shares-desc" class="sr-only">Maximum number of Shares/Options</div>
                </div>
                
                <div class="slider-container">
                    <label for="salary-slider">Adjust Compensation Balance</label>
                    <div class="slider-label">
                        <span>More Equity</span>
                        <span>More Salary</span>
                    </div>
                    <input type="range" id="salary-slider" min="0" max="100" value="50" 
                           aria-valuemin="0" aria-valuemax="100" aria-valuenow="50"
                           aria-describedby="slider-desc">
                    <div id="slider-desc" class="sr-only">
                        Slide left for more equity and less salary, slide right for more salary and less equity
                    </div>
                </div>
            </form>
            
            <!-- Results Display -->
            <div class="result" role="region" aria-live="polite" aria-label="Calculated compensation">
                <div class="result-item">
                    <div class="result-label">Selected Salary</div>
                    <div class="result-value" id="current-salary">$75,000</div>
                </div>
                <div class="result-item" id="current-equity-container">
                    <div class="result-label">Selected Equity</div>
                    <div class="result-value equity-value" id="current-equity">0.75%</div>
                </div>
                <div class="result-item" id="current-shares-container" style="display: none;">
                    <div class="result-label">Selected Shares/Options</div>
                    <div class="result-value equity-value" id="current-shares">7,500</div>
                </div>
            </div>
            
            <!-- Different messages for employers and employees -->
            <p id="employer-info-text" class="info-text">
                Your potential employee will adjust the slider to find their ideal balance between salary and equity. Once they have selected their compensation balance it will be emailed back to you so you can prepare formal contracts.
            </p>
            
            <p id="employee-info-text" class="info-text" style="display: none;">
                Adjust the slider to find your ideal balance between salary and equity. The higher the salary, the lower the equity percentage. Once we have received your response we will send you formal contracts accordingly.
            </p>
            
            <!-- Accept Offer Section (Employee View) -->
            <div id="accept-offer-container" style="display: none;" aria-live="polite">
                <button id="accept-offer-button" class="accept-button" type="button">
                    Accept This Offer
                </button>
                
                <div id="acceptance-email-controls" style="display: none;" role="region" aria-label="Send acceptance email">
                    <p class="form-heading">Send acceptance directly to employer:</p>
                    <div class="input-group">
                        <label for="employee-sender-name">Your Name (Offeree)</label>
                        <input type="text" id="employee-sender-name" class="standard-input" aria-required="true">
                    </div>
                    <button id="send-acceptance-email-button" class="accept-button" type="button">
                        Send Acceptance Email
                    </button>
                    <div id="acceptance-email-status" class="email-status">
                        <p id="acceptance-sending-status"></p>
                    </div>
                </div>
                
                <div id="offer-accepted-message" class="status-message" style="display: none;">
                    <p class="success-message">Your compensation choice is ready to be submitted!</p>
                    <p><strong>To send your acceptance manually:</strong></p>
                    <ol>
                        <li>Copy the email content below</li>
                        <li>Open your email program</li>
                        <li>Create a new email to: <span id="employer-email-display" class="email-display"></span></li>
                        <li>Use subject: <span id="acceptance-subject-display" class="subject-display"></span></li>
                        <li>Paste the content and send</li>
                    </ol>
                    <div class="email-content-container">
                        <p><strong>Email Content:</strong></p>
                        <textarea id="acceptance-email-content" class="email-content"></textarea>
                        <div class="copy-container">
                            <button id="copy-acceptance-content" class="copy-button" type="button">
                                Copy Email Content
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Generate Link Section (Employer View) -->
            <div class="share-container" id="share-container" aria-live="polite">
                <button id="generate-link" class="share-button" type="button">Generate Link</button>
                
                <div id="email-sending-controls" class="status-message" style="display: none;">
                    <p class="form-heading">Send offer directly to offeree:</p>
                    <button id="send-email-button" class="share-button success-button" type="button">
                        Send Offer Email
                    </button>
                    <div id="email-status" class="email-status">
                        <p id="sending-status"></p>
                    </div>
                </div>
                
                <div id="link-status-message" class="status-message" style="display: none;">
                    <p class="success-message">Link has been generated successfully!</p>
                    <p><strong>To send this offer to the offeree manually:</strong></p>
                    <ol>
                        <li>Copy the email content below</li>
                        <li>Open your email program</li>
                        <li>Create a new email to: <span id="employee-email-display" class="email-display"></span></li>
                        <li>Use subject: <span id="offer-subject-display" class="subject-display"></span></li>
                        <li>Paste the content and send</li>
                    </ol>
                    <div class="email-content-container">
                        <p><strong>Email Content:</strong></p>
                        <textarea id="offer-email-content" class="email-content"></textarea>
                        <div class="copy-container">
                            <button id="copy-offer-content" class="copy-button" type="button">
                                Copy Email Content
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="share-link-container" style="display: none;">
                    <div id="share-link" class="share-link" aria-label="Generated share link"></div>
                    <button id="copy-link" class="copy-button" type="button">
                        Copy Link to Clipboard
                    </button>
                </div>
                
                <div class="all-details-container">
                    <textarea id="all-details" style="display: none;" aria-label="All offer details"></textarea>
                </div>
            </div>
            
            <!-- Social Share Section (FIXED) -->
            <div class="social-share-container">
                <div class="social-share-title">Share CompMax™ with your network</div>
                <div class="social-buttons">
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://maxcomp.app/" target="_blank" class="social-button facebook" aria-label="Share on Facebook">
                        f
                    </a>
                    <a href="https://twitter.com/intent/tweet?url=https://maxcomp.app/&text=CompMax%20-%20Create%20flexible%20compensation%20offers%20with%20adjustable%20salary%20and%20equity" target="_blank" class="social-button twitter" aria-label="Share on X">
                        𝕏
                    </a>
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://maxcomp.app/&title=CompMax™&summary=Create%20flexible%20compensation%20offers%20with%20adjustable%20salary%20and%20equity" target="_blank" class="social-button linkedin" aria-label="Share on LinkedIn">
                        in
                    </a>
                    <!-- New Email Share Button -->
                    <a href="#" class="social-button email" id="email-share-button" aria-label="Share via Email">
                        ✉
                    </a>
                </div>
            </div>
            
            <!-- Email Options Modal -->
            <div id="email-options-modal">
                <div class="email-modal-content">
                    <h3 style="margin-top: 0;">Share via Email</h3>
                    <p>Choose how you'd like to share:</p>
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                        <a href="mailto:?subject=CompMax™%20-%20Flexible%20Compensation%20Tool&body=Check%20out%20CompMax™%2C%20a%20professional%20tool%20for%20creating%20customizable%20job%20offers%20with%20flexible%20salary%20and%20equity%20components%3A%20https%3A%2F%2Fmaxcomp.app%2F" class="email-option default-email" target="_blank">
                            Open in Email Client
                        </a>
                        <a href="https://mail.google.com/mail/?view=cm&fs=1&su=CompMax™%20-%20Flexible%20Compensation%20Tool&body=Check%20out%20CompMax™%2C%20a%20professional%20tool%20for%20creating%20customizable%20job%20offers%20with%20flexible%20salary%20and%20equity%20components%3A%20https%3A%2F%2Fmaxcomp.app%2F" target="_blank" class="email-option gmail-email">
                            Gmail
                        </a>
                        <a href="https://outlook.live.com/mail/0/deeplink/compose?subject=CompMax™%20-%20Flexible%20Compensation%20Tool&body=Check%20out%20CompMax™%2C%20a%20professional%20tool%20for%20creating%20customizable%20job%20offers%20with%20flexible%20salary%20and%20equity%20components%3A%20https%3A%2F%2Fmaxcomp.app%2F" target="_blank" class="email-option outlook-email">
                            Outlook Web
                        </a>
                        <a href="https://compose.mail.yahoo.com/?subject=CompMax™%20-%20Flexible%20Compensation%20Tool&body=Check%20out%20CompMax™%2C%20a%20professional%20tool%20for%20creating%20customizable%20job%20offers%20with%20flexible%20salary%20and%20equity%20components%3A%20https%3A%2F%2Fmaxcomp.app%2F" target="_blank" class="email-option yahoo-email">
                            Yahoo Mail
                        </a>
                        <button id="close-email-options" class="email-option cancel-email">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Feedback Section with updated form to include email input -->
            <div class="feedback-container">
                <button id="feedback-button" class="feedback-button">Provide Feedback</button>
                <div id="feedback-form" class="feedback-form">
                    <form id="feedback-form-element">
                        <p>We'd love to hear your thoughts on CompMax™:</p>
                        <!-- Add email input field -->
                        <input type="email" id="feedback-email" name="email" placeholder="Your email address (so we can respond)" required style="width: 100%; margin-bottom: 10px; padding: 8px; border: 1px solid var(--gray-300); border-radius: 4px;">
                        <textarea id="feedback-message" name="feedback" placeholder="Enter your feedback here..." required></textarea>
                        <button type="submit" id="send-feedback">Send Feedback</button>
                        <div id="feedback-response" class="feedback-response"></div>
                    </form>
                </div>
            </div>
            
            <footer class="copyright-footer">
                <p>© MXX1 Holdings Pty Ltd</p>
            </footer>
        </main>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="modal" role="dialog" aria-labelledby="error-title" aria-hidden="true">
        <div class="modal-content">
            <span class="close-button" id="close-error-modal" aria-label="Close">&times;</span>
            <h2 id="error-title">Error</h2>
            <p id="error-message"></p>
            <button id="error-ok-button" class="share-button">OK</button>
        </div>
    </div>

    <!-- Updated Feedback JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const feedbackButton = document.getElementById('feedback-button');
            const feedbackForm = document.getElementById('feedback-form');
            const feedbackFormElement = document.getElementById('feedback-form-element');
            const feedbackResponse = document.getElementById('feedback-response');
            
            // Toggle feedback form
            feedbackButton.addEventListener('click', function() {
                feedbackForm.style.display = feedbackForm.style.display === 'block' ? 'none' : 'block';
                feedbackResponse.style.display = 'none';
                feedbackResponse.className = 'feedback-response';
            });
            
            // Handle form submission without redirecting
            feedbackFormElement.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const feedbackMessage = document.getElementById('feedback-message').value.trim();
                const senderEmail = document.getElementById('feedback-email').value.trim();
                
                if (!feedbackMessage) {
                    showFeedbackMessage('Please enter your feedback before sending.', 'error');
                    return;
                }
                
                if (!senderEmail) {
                    showFeedbackMessage('Please provide your email address.', 'error');
                    return;
                }
                
                // Show "sending" status
                showFeedbackMessage('Sending feedback...', 'pending');
                
                // Send feedback via EmailJS
                emailjs.send(CONFIG.emailjs.serviceId, CONFIG.emailjs.templateId, {
                    to_name: "Admin",
                    to_email: "maxwell.ian@gmail.com",
                    subject: "CompMax™ Feedback",
                    message: feedbackMessage,
                    from_name: "CompMax™ User",
                    reply_to: senderEmail,
                    sender_email: senderEmail,
                    time: new Date().toLocaleString()
                })
                .then(function(response) {
                    console.log('Feedback email sent successfully:', response.status, response.text);
                    showFeedbackMessage('Thank you for your feedback!', 'success');
                    
                    // Save the feedback to localStorage as a backup
                    const feedbacks = JSON.parse(localStorage.getItem('compmax-feedback') || '[]');
                    feedbacks.push({
                        message: feedbackMessage,
                        email: senderEmail,
                        timestamp: new Date().toISOString()
                    });
                    localStorage.setItem('compmax-feedback', JSON.stringify(feedbacks));
                    
                    // Reset the form
                    document.getElementById('feedback-message').value = '';
                    document.getElementById('feedback-email').value = '';
                    
                    // Auto-hide after 3 seconds
                    setTimeout(function() {
                        feedbackForm.style.display = 'none';
                    }, 3000);
                })
                .catch(function(error) {
                    console.error('Feedback email failed:', error);
                    showFeedbackMessage('Failed to send feedback. Please try again later.', 'error');
                });
            });
            
            function showFeedbackMessage(message, type) {
                feedbackResponse.textContent = message;
                feedbackResponse.style.display = 'block';
                
                if (type === 'success') {
                    feedbackResponse.className = 'feedback-response feedback-success';
                } else if (type === 'error') {
                    feedbackResponse.className = 'feedback-response feedback-error';
                } else {
                    feedbackResponse.className = 'feedback-response';
                    feedbackResponse.style.backgroundColor = '#f0f0f0';
                    feedbackResponse.style.color = '#666';
                }
            }
            
            // Email Share Button Functionality
            const emailButton = document.getElementById('email-share-button');
            const emailModal = document.getElementById('email-options-modal');
            const closeEmailModal = document.getElementById('close-email-options');
            
            // Toggle email options modal
            emailButton.addEventListener('click', function(e) {
                e.preventDefault();
                emailModal.style.display = 'flex';
            });
            
            // Close email options modal
            closeEmailModal.addEventListener('click', function() {
                emailModal.style.display = 'none';
            });
            
            // Close email modal when clicking outside the content
            emailModal.addEventListener('click', function(e) {
                if (e.target === emailModal) {
                    emailModal.style.display = 'none';
                }
            });
        });
    </script>

    <!-- Form Data Persistence Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Define the form fields to save
            const formFields = [
                'company-name', 'sender-name', 'employer-email', 'offer-date', 
                'position-title', 'employee-name', 'employee-email', 'max-salary',
                'max-equity', 'max-shares', 'salary-slider'
            ];
            
            // Also save radio button state
            const radioButtons = ['equity-percentage', 'equity-shares'];
            
            // Save form data when inputs change
            formFields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element) {
                    element.addEventListener('change', saveFormData);
                    element.addEventListener('input', saveFormData);
                    element.addEventListener('blur', saveFormData);
                }
            });
            
            // Save radio button states
            radioButtons.forEach(radioId => {
                const element = document.getElementById(radioId);
                if (element) {
                    element.addEventListener('change', saveFormData);
                }
            });
            
            // Function to save all form data to localStorage
            function saveFormData() {
                // Don't save if in employee view (URL has parameters)
                if (window.location.search) return;
                
                const formData = {};
                
                // Save input values
                formFields.forEach(fieldId => {
                    const element = document.getElementById(fieldId);
                    if (element) {
                        formData[fieldId] = element.value;
                    }
                });
                
                // Save radio button states
                radioButtons.forEach(radioId => {
                    const element = document.getElementById(radioId);
                    if (element) {
                        formData[radioId] = element.checked;
                    }
                });
                
                // Save to localStorage
                localStorage.setItem('compmax-form-data', JSON.stringify(formData));
            }
            
            // Load saved form data when the page loads
            function loadFormData() {
                // Don't restore data if in employee view (URL has parameters)
                if (window.location.search) return;
                
                const savedData = localStorage.getItem('compmax-form-data');
                if (!savedData) return;
                
                try {
                    const formData = JSON.parse(savedData);
                    
                    // Restore input values
                    formFields.forEach(fieldId => {
                        const element = document.getElementById(fieldId);
                        if (element && formData[fieldId]) {
                            element.value = formData[fieldId];
                        }
                    });
                    
                    // Restore radio button states
                    radioButtons.forEach(radioId => {
                        const element = document.getElementById(radioId);
                        if (element && formData[radioId] !== undefined) {
                            element.checked = formData[radioId];
                        }
                    });
                    
                    // Trigger calculation update after restoring data
                    const event = new Event('input');
                    const sliderElement = document.getElementById('salary-slider');
                    if (sliderElement) {
                        sliderElement.dispatchEvent(event);
                    }
                    
                    // Handle equity type display
                    const equityTypeEvent = new Event('change');
                    if (formData['equity-shares'] === true) {
                        const sharesRadio = document.getElementById('equity-shares');
                        if (sharesRadio) {
                            sharesRadio.dispatchEvent(equityTypeEvent);
                        }
                    }
                } catch (error) {
                    console.error('Error restoring form data:', error);
                }
            }
            
            // Load saved data when page loads
            loadFormData();
        });
    </script>
</body>
</html>
